# Template file for 'weechat-matrix'
pkgname=weechat-matrix
version=0.3.0
revision=1
build_style=python3-pep517
hostmakedepends="python3-poetry-core"
depends="python3-webcolors python3-openssl python3-atomicwrites python3-attrs
 python3-logbook python3-Pygments python3-matrix-nio python3-aiohttp
 python3-magic python3-requests weechat-python"
short_desc="Weechat Matrix protocol script written in python"
maintainer="meator <meator.dev@gmail.com>"
license="ISC"
homepage="https://github.com/poljar/weechat-matrix"
distfiles="https://github.com/poljar/weechat-matrix/archive/refs/tags/${version}.tar.gz"
checksum=4a7942ec976dc6081ebb689cb0dc0f02f8ab9d24121f98c6dcb7f39478251329

post_install() {
	vlicense LICENSE
	for _script in matrix_decrypt matrix_sso_helper matrix_upload; do
		vbin contrib/$_script.py
	done
	vinstall main.py 755 usr/share/weechat/python weechat-matrix.py
}
